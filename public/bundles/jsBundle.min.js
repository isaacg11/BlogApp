!function(){"use strict";function e(e,t){e.state("Home",{url:"/",templateUrl:"views/Home.html"}).state("Register",{url:"/Register",templateUrl:"views/register.html"}).state("Profile",{url:"/Profile",templateUrl:"views/profile.html"}).state("Add",{url:"/Add",templateUrl:"views/addBlog.html"}).state("Public",{url:"/Public",templateUrl:"views/public.html"}).state("Comment",{url:"/Comment/:id",templateUrl:"views/addComment.html"}).state("Help",{url:"/Help",templateUrl:"views/help.html"}),t.otherwise("/")}angular.module("app",["ui.router","ui.bootstrap"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){var t=this;t.blogS=e.blogS}angular.module("app").controller("HomeController",e),e.$inject=["HomeFactory"]}(),function(){"use strict";function e(e,t,o){var r=this;r.status=t.status,r.addBlog=function(){r.blog.user=r.status.username,e.postBlog(r.blog).then(function(){o.go("Profile")})}}angular.module("app").controller("addBlogController",e),e.$inject=["HomeFactory","userFactory","$state"]}(),function(){"use strict";function e(e,t,o){var r=this;r.comment={},o.id?e.getBlogID(o.id).then(function(e){r.blog=e}):t.go("Comment"),r.createComment=function(){e.createComment(o.id,r.comment).then(function(e){r.comment._id=e._id,r.comment.dateCreated=e.dateCreated,r.blog.comments.push(r.comment),r.comment={}})}}angular.module("app").controller("commentDetailController",e),e.$inject=["HomeFactory","$state","$stateParams"]}(),function(){"use strict";function e(e,t,o){var r=this;console.log(o.description),t.blog=o,t.editBlog=function(){console.log("reached the editModalController"),e.close(r.blog)}}angular.module("app").controller("editModalController",e),e.$inject=["$modalInstance","$scope","blog"]}(),function(){"use strict";function e(e,t,o,r){function n(){e.login(l.user).then(function(){o.go("Profile")})}function s(e){t.deleteBlog(e).then(function(){t.getBlogs()})}var l=this;l.user={},l.status=e.status,l.login=n,l.deleteBlog=s,l.logout=e.logout,l.blogS=t.blogS,t.getBlogsUser().then(function(e){l.blogS.user=e}),l.openEdit=function(e){var o=r.open({controller:"editModalController",templateUrl:"./../views/editBlog.html",resolve:{blog:function(){return e}}});o.result.then(function(o){t.editBlog(o,e)},function(){console.log("inside of the result")})}}angular.module("app").controller("navBarController",e),e.$inject=["userFactory","HomeFactory","$state","$modal"]}(),function(){"use strict";function e(e,t){function o(){var o=r.user;return o.username&&o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void e.register(o).then(function(){t.go("Profile")}):!1}var r=this;r.user={},r.status=e.status,r.register=o}angular.module("app").controller("registerController",e),e.$inject=["userFactory","$state"]}(),function(){"use strict";function e(e,t){var o={};return o.blogS=[],o.editBlog=function(t,r){e.put("/the/apiCall/EditBlog"+r._id).success(function(e){o.blogS[o.blogS.indexOf(r)]=angular.copy(t)})},o.postBlog=function(r){var n=t.defer();return e.post("/the/apiCall/Blog",r).success(function(e){r._id=e.id,r.dateCreated=new Date,o.blogS.push(r),n.resolve()}).error(function(e){n.reject(e)}),n.promise},o.getBlogs=function(){var o=t.defer();return e.get("/the/apiCall/Blog").success(function(e){o.resolve(e)}),o.promise},o.getBlogsUser=function(){var o=t.defer();return e.get("/the/apiCall/BlogUser/blog",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).success(function(e){e.user={},e.user.username=JSON.parse(atob(localStorage.token.split(".")[1])).username,o.resolve(e)}),o.promise},o.deleteBlog=function(r){alert("Are you sure you want to remove this blog?");var n=t.defer();return e.post("/the/apiCall/deleteBlog/"+r._id).success(function(e){o.blogS.splice(o.blogS.indexOf(r),1),n.resolve()}),n.promise},o.getBlogID=function(o){var r=t.defer();return e.get("/the/apiCall/Blog/"+o).success(function(e){r.resolve(e)}),r.promise},o.createComment=function(o,r){var n=t.defer();return e.post("/the/apiCall/Blog/"+o+"/comment",r,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).success(function(e){r.user={},r.user.username=JSON.parse(atob(localStorage.token.split(".")[1])).username,n.resolve(e)}),n.promise},o}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,o){function r(o){var r=t.defer();return e.post("/api/Users/Register",o).success(function(e){l(e.token),c.status.isLoggedIn=!0,r.resolve()}).error(function(e){console.error(e)}),r.promise}function n(o){var r={username:o.username.toLowerCase(),password:o.password},n=t.defer();return e.post("/api/Users/Login",r).success(function(e){l(e.token),c.status.isLoggedIn=!0,n.resolve()}),n.promise}function s(){c.status.isLoggedIn=!1,u()}function l(e){localStorage.setItem("token",e),c.status.username=i()}function a(){return localStorage.token}function u(){localStorage.removeItem("token"),c.status.username=null}function i(){return JSON.parse(atob(a().split(".")[1])).username}var c={};return c.status={},a()&&(c.status.isLoggedIn=!0,c.status.username=i()),c.setToken=l,c.getToken=a,c.removeToken=u,c.register=r,c.login=n,c.logout=s,c}angular.module("app").factory("userFactory",e),e.$inject=["$http","$q","$state"]}();