!function(){"use strict";function e(e,t){e.state("Home",{url:"/Home",templateUrl:"views/Home.html"}).state("Register",{url:"/Register",templateUrl:"views/register.html"}).state("Profile",{url:"/Profile",templateUrl:"views/profile.html"}).state("Add",{url:"/Add",templateUrl:"views/addBlog.html"}).state("Login",{url:"/",templateUrl:"views/login.html"}).state("Comment",{url:"/Comment/:id",templateUrl:"views/addComment.html"}).state("Help",{url:"/Help",templateUrl:"views/help.html"}),t.otherwise("/")}angular.module("app",["ui.router","ui.bootstrap"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){var t=this;e.getBlogs().then(function(e){t.blogS=e})}angular.module("app").controller("HomeController",e),e.$inject=["HomeFactory"]}(),function(){"use strict";function e(e,t,o){var r=this;r.status=t.status,r.addBlog=function(){r.blog.user=r.status.username,e.postBlog(r.blog).then(function(){o.go("Profile")})}}angular.module("app").controller("addBlogController",e),e.$inject=["addBlogFactory","userFactory","$state"]}(),function(){"use strict";function e(e,t,o){var r=this;r.comment={},console.log(e),o.id?e.getBlogID(o.id).then(function(e){r.blog=e}):t.go("Comment"),r.createComment=function(){e.createComment(o.id,r.comment).then(function(e){r.comment._id=e._id,r.comment.dateCreated=e.dateCreated,r.blog.comments.push(r.comment),r.comment={}})}}angular.module("app").controller("CommentDetailController",e),e.$inject=["HomeFactory","$state","$stateParams"]}(),function(){"use strict";function e(e,t,o){var r=this;console.log(o.description),t.blog=o,t.editBlog=function(){console.log("reached the editModalController"),e.close(r.blog)}}angular.module("app").controller("editModalController",e),e.$inject=["$modalInstance","$scope","blog"]}(),function(){"use strict";function e(e,t,o){function r(){t.login(s.user).then(function(){o.go("Profile")})}function n(){var e=s.user;return e.username&&e.email&&e.password&&e.cpassword&&e.password===e.cpassword?void t.register(e).then(function(){o.go("Profile")}):!1}function l(){t.logout()}var s=this;s.user={},s.status=t.status,s.login=r,s.logout=l,s.register=n}angular.module("app").controller("navBarController",e),e.$inject=["profileFactory","userFactory","$state"]}(),function(){"use strict";function e(e,t,o,r){function n(e){t.deleteBlog(e).then(function(){t.getBlogs()})}var l=this;l.user={},l.status=e.status,l.deleteBlog=n,l.logout=e.logout,t.getBlogsUser().then(function(e){l.blogS=e}),l.openEdit=function(e){var o=r.open({controller:"editModalController",templateUrl:"./../views/editBlog.html",resolve:{blog:function(){return e}}});o.result.then(function(o){t.editBlog(o,e)},function(){console.log("inside of the result")})}}angular.module("app").controller("profileController",e),e.$inject=["userFactory","profileFactory","$state","$modal"]}(),function(){"use strict";function e(e,t){var o={};return o.blogS=[],o.getBlogs=function(){var o=t.defer();return e.get("/the/apiCall/Blog").success(function(e){o.resolve(e)}),o.promise},o.getBlogID=function(o){var r=t.defer();return e.get("/the/apiCall/Blog/"+o).success(function(e){r.resolve(e)}),r.promise},o.createComment=function(o,r){var n=t.defer();return e.post("/the/apiCall/Blog/"+o+"/comment",r,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).success(function(e){r.user={},r.user.username=JSON.parse(atob(localStorage.token.split(".")[1])).username,n.resolve(e)}),n.promise},o}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){var o={};o.blogS=[];var r={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};return o.postBlog=function(n){var l=t.defer();return e.post("/the/apiCall/Blog",n,r).success(function(e){n._id=e.id,n.dateCreated=new Date,o.blogS.push(n),l.resolve()}).error(function(e){l.reject(e)}),l.promise},o}angular.module("app").factory("addBlogFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){var o={};o.blogS=[];var r={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};return o.deleteBlog=function(r){alert("Are you sure you want to remove this blog?");var n=t.defer();return e.post("/the/apiCall/deleteBlog/"+r._id).success(function(e){o.blogS.splice(o.blogS.indexOf(r),1),n.resolve()}),n.promise},o.editBlog=function(t,r){e.put("/the/apiCall/EditBlog"+r._id).success(function(e){o.blogS[o.blogS.indexOf(r)]=angular.copy(t)})},o.getBlogsUser=function(){var o=t.defer();return e.get("/the/apiCall/BlogUser/blog",r).success(function(e){e.user={},e.user.username=JSON.parse(atob(localStorage.token.split(".")[1])).username,o.resolve(e)}),o.promise},o}angular.module("app").factory("profileFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,o){function r(o){var r=t.defer();return e.post("/api/Users/Register",o).success(function(e){s(e.token),c.status.isLoggedIn=!0,r.resolve()}).error(function(e){console.error(e)}),r.promise}function n(o){var r={username:o.username.toLowerCase(),password:o.password},n=t.defer();return e.post("/api/Users/Login",r).success(function(e){s(e.token),c.status.isLoggedIn=!0,n.resolve()}),n.promise}function l(){c.status.isLoggedIn=!1,u()}function s(e){localStorage.setItem("token",e),c.status.username=i()}function a(){return localStorage.token}function u(){localStorage.removeItem("token"),c.status.username=null}function i(){return JSON.parse(atob(a().split(".")[1])).username}var c={};return c.status={},a()&&(c.status.isLoggedIn=!0,c.status.username=i()),c.setToken=s,c.getToken=a,c.removeToken=u,c.register=r,c.login=n,c.logout=l,c}angular.module("app").factory("userFactory",e),e.$inject=["$http","$q","$state"]}();