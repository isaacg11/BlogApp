!function(){"use strict";function t(t,e){t.state("Home",{url:"/",templateUrl:"views/Home.html"}).state("Register",{url:"/Register",templateUrl:"views/register.html"}).state("Profile",{url:"/Profile",templateUrl:"views/profile.html"}).state("Add",{url:"/Add",templateUrl:"views/addBlog.html"}).state("Edit",{url:"/Edit",templateUrl:"views/editBlog.html"}).state("Public",{url:"/Public",templateUrl:"views/public.html"}),e.otherwise("/")}angular.module("app",["ui.router"]).config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t){var e=this;e.blogS=[],t.getBlogs().then(function(t){e.blogS=t})}angular.module("app").controller("HomeController",t),t.$inject=["HomeFactory"]}(),function(){"use strict";function t(t,e){var o=this;o.addBlog=function(){t.postBlog(o.blog).then(function(){e.go("Public")})}}angular.module("app").controller("addBlogController",t),t.$inject=["HomeFactory","$state"]}(),function(){"use strict";function t(t,e){function o(){t.login(r.user).then(function(){e.go("Profile")})}var r=this;r.user={},r.status=t.status,r.login=o,r.logout=t.logout}angular.module("app").controller("navBarController",t),t.$inject=["userFactory","$state"]}(),function(){"use strict";function t(t,e){function o(){var o=r.user;return o.username&&o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void t.register(o).then(function(){e.go("Profile")}):!1}var r=this;r.user={},r.status=t.status,r.register=o}angular.module("app").controller("registerController",t),t.$inject=["userFactory","$state"]}(),function(){"use strict";function t(t,e){var o={};return o.blogS=[],o.postBlog=function(r){var s=e.defer();return t.post("/the/apiCall/Blog",r).success(function(t){r._id=t.id,r.dateCreated=new Date,o.blogS.push(r),s.resolve()}).error(function(t){s.reject(t)}),s.promise},o.getBlogs=function(){var o=e.defer();return t.get("/the/apiCall/Blog").success(function(t){o.resolve(t)}),o.promise},o}angular.module("app").factory("HomeFactory",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,e,o){function r(o){var r=e.defer();return t.post("/api/Users/Register",o).success(function(t){u(t.token),c.status.isLoggedIn=!0,r.resolve()}).error(function(t){console.error(t)}),r.promise}function s(o){var r={username:o.username.toLowerCase(),password:o.password},s=e.defer();return t.post("/api/Users/Login",r).success(function(t){u(t.token),c.status.isLoggedIn=!0,s.resolve()}),s.promise}function n(){console.log("reached the factory"),c.status.isLoggedIn=!1,i()}function u(t){localStorage.setItem("token",t),c.status.username=l()}function a(){return localStorage.token}function i(){localStorage.removeItem("token"),c.status.username=null}function l(){return JSON.parse(atob(a().split(".")[1])).username}var c={};return c.status={},a()&&(c.status.isLoggedIn=!0,c.status.username=l()),c.setToken=u,c.getToken=a,c.removeToken=i,c.register=r,c.login=s,c.logout=n,c}angular.module("app").factory("userFactory",t),t.$inject=["$http","$q","$state"]}();