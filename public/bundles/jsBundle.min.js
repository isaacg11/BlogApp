!function(){"use strict";function e(e,t){e.state("Home",{url:"/",templateUrl:"views/Home.html"}).state("Register",{url:"/Register",templateUrl:"views/register.html"}).state("Profile",{url:"/Profile",templateUrl:"views/profile.html"}).state("Add",{url:"/Add",templateUrl:"views/addBlog.html"}).state("Edit",{url:"/Edit",templateUrl:"views/editBlog.html"}).state("Public",{url:"/Public",templateUrl:"views/public.html"}),t.otherwise("/")}angular.module("app",["ui.router"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){var t=this;t.blogS=e.blogS}angular.module("app").controller("HomeController",e),e.$inject=["HomeFactory"]}(),function(){"use strict";function e(e,t,o){var r=this;r.status=t.status,r.addBlog=function(){r.blog.user=r.status.username,e.postBlog(r.blog).then(function(){o.go("Profile")})}}angular.module("app").controller("addBlogController",e),e.$inject=["HomeFactory","userFactory","$state"]}(),function(){"use strict";function e(e,t,o){function r(){e.login(n.user).then(function(){o.go("Profile")})}function s(e){t.deleteBlog(e).then(function(){t.getBlogs()})}var n=this;n.user={},n.status=e.status,n.login=r,n.deleteBlog=s,n.logout=e.logout,n.blogS=t.blogS}angular.module("app").controller("navBarController",e),e.$inject=["userFactory","HomeFactory","$state","$window"]}(),function(){"use strict";function e(e,t){function o(){var o=r.user;return o.username&&o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void e.register(o).then(function(){t.go("Profile")}):!1}var r=this;r.user={},r.status=e.status,r.register=o}angular.module("app").controller("registerController",e),e.$inject=["userFactory","$state"]}(),function(){"use strict";function e(e,t){var o={};return o.blogS=[],o.postBlog=function(r){var s=t.defer();return e.post("/the/apiCall/Blog",r).success(function(e){r._id=e.id,r.dateCreated=new Date,o.blogS.push(r),s.resolve()}).error(function(e){s.reject(e)}),s.promise},o.getBlogs=function(){var o=t.defer();return e.get("/the/apiCall/Blog").success(function(e){o.resolve(e)}),o.promise},o.deleteBlog=function(r){console.log("reached the factory");var s=t.defer();return e.post("/the/apiCall/deleteBlog/"+r._id).success(function(e){o.blogS.splice(o.blogS.indexOf(r),1),s.resolve()}),s.promise},o}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,o){function r(o){var r=t.defer();return e.post("/api/Users/Register",o).success(function(e){u(e.token),c.status.isLoggedIn=!0,r.resolve()}).error(function(e){console.error(e)}),r.promise}function s(o){var r={username:o.username.toLowerCase(),password:o.password},s=t.defer();return e.post("/api/Users/Login",r).success(function(e){u(e.token),c.status.isLoggedIn=!0,s.resolve()}),s.promise}function n(){c.status.isLoggedIn=!1,a()}function u(e){localStorage.setItem("token",e),c.status.username=i()}function l(){return localStorage.token}function a(){localStorage.removeItem("token"),c.status.username=null}function i(){return JSON.parse(atob(l().split(".")[1])).username}var c={};return c.status={},l()&&(c.status.isLoggedIn=!0,c.status.username=i()),c.setToken=u,c.getToken=l,c.removeToken=a,c.register=r,c.login=s,c.logout=n,c}angular.module("app").factory("userFactory",e),e.$inject=["$http","$q","$state"]}();